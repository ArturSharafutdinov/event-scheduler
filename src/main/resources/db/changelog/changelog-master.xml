<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <changeSet id="14:58 19.05.21" author="Artur">
        <createTable tableName="ACCOUNT">
            <column name="ACCOUNT_ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="USERNAME" type="varchar(64)">
                <constraints nullable="false"/>
            </column>
            <column name="AGE" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="GENDER" type="varchar(1)">
                <constraints nullable="false"/>
            </column>
            <column name="CITY" type="varchar(64)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="14:59 19.05.21" author="Artur">
        <createTable tableName="CATEGORY">
            <column name="CATEGORY_ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="NAME" type="varchar(150)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>


    <changeSet id="15:00 19.05.21" author="Artur">
        <createTable tableName="EVENT">
            <column name="EVENT_ID" type="uuid">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="NAME" type="varchar(150)">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="varchar(500)">
                <constraints nullable="false"/>
            </column>
            <column name="OWNER_ID" type="bigint">
                <constraints nullable="false" foreignKeyName="fk_event_accountId" references="ACCOUNT(ACCOUNT_ID)"/>
            </column>
            <column name="CREATED_TIME" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="START_TIME" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="FINISH_TIME" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="COMPLETED_TIME" type="timestamp">
                <constraints nullable="true"/>
            </column>
            <column name="MAX_NUMBER_OF_PARTICIPANTS" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="IS_PRIVATE" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="COORDINATES" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="CATEGORY_ID" type="bigint">
                <constraints nullable="false" foreignKeyName="fk_event_categoryId" references="CATEGORY(CATEGORY_ID)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="15:01 19.05.21" author="Artur">
        <createTable tableName="EVENT_MEMBER">
            <column name="EVENT_MEMBER_ID" type="uuid">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="EVENT_ID" type="uuid">
                <constraints nullable="false" foreignKeyName="fk_event_member_eventId" references="EVENT(EVENT_ID)"/>
            </column>
            <column name="ACCOUNT_ID" type="bigint">
                <constraints nullable="false" foreignKeyName="fk_event_account_accountId"
                             references="ACCOUNT(ACCOUNT_ID)"/>
            </column>
            <column name="ROLE" type="varchar(25)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>


    <changeSet id="15:02 19.05.21" author="Artur">
        <insert tableName="CATEGORY">
            <column name="NAME" value="Собрание"/>
        </insert>
        <insert tableName="CATEGORY">
            <column name="NAME" value="Настольные игры"/>
        </insert>
        <insert tableName="CATEGORY">
            <column name="NAME" value="Тусич"/>
        </insert>
        <insert tableName="CATEGORY">
            <column name="NAME" value="Утренник"/>
        </insert>
        <insert tableName="CATEGORY">
            <column name="NAME" value="Спорт"/>
        </insert>
    </changeSet>

    <changeSet id="7" author="eugene">
        <createTable tableName="INVITE_REQUEST">
            <column name="INVITE_REQUEST_ID" type="uuid">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="EVENT_ID" type="uuid">
                <constraints nullable="false" foreignKeyName="fk_invite_request_eventId" references="EVENT(EVENT_ID)"/>
            </column>
            <column name="ACCOUNT_ID" type="bigint">
                <constraints nullable="false" foreignKeyName="fk_invite_request_accountId" references="ACCOUNT(ACCOUNT_ID)"/>
            </column>
            <column name="DESCRIPTION" type="varchar(256)"/>
            <column name="INVITE_STATUS" type="varchar(64)"/>
        </createTable>
    </changeSet>


</databaseChangeLog>